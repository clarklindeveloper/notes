<style>img{max-width:100%;height:auto}</style><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><body><div><span style="color: rgb(0,0,0);font-weight: bold;font-style: normal;text-decoration: none">NODE.JS<span><br /></span></span><span style="color: rgb(0,0,0);font-weight: normal;font-style: normal;text-decoration: none"><br />install node.js&#x0D;<br />node makes running javascript without browser possible&#x0D;<br />&#x0D;<br />command:&#x0D;<br />node&#x0D;<br />&#x0D;<br />to run test.js file, command:&#x0D;<br />&#x0D;<br />node test.js&#x0D;<br />&#x0D;<br />require(&apos;&apos;);   &#x0D;<br />  eg.  require(&apos;os&apos;);   &#x0D;<br />  allow us to pull in more code, &#x0D;<br />  node searches for a module (os module)&#x0D;<br />  returns an object of all code available in os module&#x0D;<br />&#x0D;<br />open google chrome&#x0D;<br />  -&gt;view-&gt;developer-&gt;javascript console&#x0D;<br />&#x0D;<br />or just use:&#x0D;<br />node&#x0D;<br />&#x0D;<br />can type any javascript and it will run&#x0D;<br />&#x0D;<br />NPM is a command shipped with node&#x0D;<br />NPM allows us to install/remove/update node modules&#x0D;<br />Node has a tool that automatically run code again when it detects a file change is saved to disk&#x0D;<br />&#x0D;<br />npm install node-dev -g&#x0D;<br />sudo npm install node-dev -g                //gets around writing to binary path of computer&#x0D;<br />&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />=====================================================================================================================&#x0D;<br />modules&#x0D;<br />&#x0D;<br />package.json&#x0D;<br />{&#x0D;<br />  &apos;dependencies&apos;:{&#x0D;<br />    &apos;node-markdown&apos;:&apos;0.1.0&apos;&#x0D;<br />  },&#x0D;<br />  ...&#x0D;<br />&#x0D;<br />}&#x0D;<br />package.json has &apos;dependencies&apos; attribute in where we list the dependencies, this gets put in the node_modules folder&#x0D;<br />node-markdown will be put in node_modules/node-markdown folder&#x0D;<br />&#x0D;<br />script.js&#x0D;<br />&#x0D;<br />  var os = require(&apos;os&apos;);                &#x0D;<br />  var message = &quot;this script is running on Node.js&quot; + process.version + &apos;on a &apos; + os.type() + &apos;-based operating system&apos;;&#x0D;<br />  console.log(message);&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  node script.js&#x0D;<br />&#x0D;<br />use require(&apos;./module-name.js&apos;);          ./  to load from local modules instead of the node_modules directory (helps separating data from code)&#x0D;<br />&#x0D;<br />eg.&#x0D;<br />&#x0D;<br />data_modules/fibonacci.js&#x0D;<br />  exports.data = [1,1,2,3,5,8,13,21];       //using exports gains access as properties&#x0D;<br />  &#x0D;<br />data_modules/script.js&#x0D;<br />var sequence = require(&apos;./fibonacci&apos;);      ./ means load local module instead of from core modules collection&#x0D;<br />console.log(sequence.data);&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  node data_module/script.js&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />find modules via npm&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />npm search              //used to search for modules&#x0D;<br />&#x0D;<br />npm search | grep markdown          //piped through grep and search for &apos;markdown&apos;&#x0D;<br />&#x0D;<br />npm search markdown           //search for markdown&#x0D;<br />&#x0D;<br />search.npmjs.org&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />npm init             //creates package.json&#x0D;<br />&#x0D;<br />create &apos;dependencies&apos;&#x0D;<br />&#x0D;<br />package.json&#x0D;<br />{&#x0D;<br />  ...&#x0D;<br />  &apos;dependencies&apos;:{&#x0D;<br />    &quot;node-markdown&quot;:&quot;0.1.0&quot;             version to pull, use * astrix for latest version&#x0D;<br />  }&#x0D;<br />  ...&#x0D;<br />}&#x0D;<br />&#x0D;<br />&#x0D;<br />install dependencies&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  npm install&#x0D;<br />&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />updating modules&#x0D;<br />&#x0D;<br />updating latest versions of all modules&#x0D;<br />cmd:&#x0D;<br />  npm update                                     //update modules&#x0D;<br />  sudo npm update -g&#x0D;<br />&#x0D;<br />&#x0D;<br />remove unused modules&#x0D;<br />  remove from dependencies list in package.json&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  npm prune                                       //remove unwanted modules&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />=====================================================================================================================&#x0D;<br />command line scripts&#x0D;<br />&#x0D;<br />reading args by using .argv;&#x0D;<br />&#x0D;<br />&#x0D;<br />eg. &#x0D;<br />script.js&#x0D;<br />&#x0D;<br />var argv = require(&apos;optimist&apos;).argv;               //getting argv property off optimist module  &#x0D;<br />for(var i=0; i&lt; argv.times; i++){                                         //getting .times property  &#x0D;<br />  console.log(argv._[0] + &apos;on loop number &apos; + (i + 1));&#x0D;<br />}&#x0D;<br />&#x0D;<br />times property gets set on the command line using the times flag.         --times&#x0D;<br />remaining arguments not set with flags are stored in the _[] array         ._[0]     //gets first remaining argument &#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  node script.js --times 8&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />command line interactive prompts&#x0D;<br />&#x0D;<br />readline.js&#x0D;<br />&#x0D;<br />module: readline&#x0D;<br />&#x0D;<br />var rl = require(&apos;readline&apos;);             //readline is part of core modules that come with NPM&#x0D;<br />&#x0D;<br />var prompts = rl.createInterface(process.stdin, process.stdout);&#x0D;<br />&#x0D;<br />prompts.question(&quot;how many servings of fruits and vegetables do you eat each day? &quot;, function(servings){&#x0D;<br />  var message = &quot;&quot;;&#x0D;<br />  if(servings &lt; 5){&#x0D;<br />    message = &quot;since you&apos;re only eating &quot; + servings + &quot;right now, you might want to start eating &quot; + (5 - servings) + &quot;more.&quot;;&#x0D;<br />  }else{&#x0D;<br />    message = &quot;Excellent, your diet is on the right track!&quot;;&#x0D;<br />  }&#x0D;<br />&#x0D;<br />  console.log(message);&#x0D;<br />&#x0D;<br />  process.exit();       //end process when done&#x0D;<br />});&#x0D;<br />  &#x0D;<br />=====================================================================================================================&#x0D;<br />using jquery in node on command line to get content out html document&#x0D;<br />&#x0D;<br />accessing the file system via require(&apos;fs&apos;);        //core node module&#x0D;<br />&#x0D;<br />script.js&#x0D;<br />  var argv = require(&apos;optimist&apos;).argv,&#x0D;<br />  $ = require(&apos;jquery&apos;),&#x0D;<br />  fs = require(&apos;fs&apos;);&#x0D;<br />&#x0D;<br />var file = argv._[0];                              //get name of the file&#x0D;<br />&#x0D;<br />var html = fs.readFileSync(file, &apos;UTF-8&apos;);        //pass in name of file and open up in UTF-8 encoding&#x0D;<br />&#x0D;<br />                                                  //html string is parsed into jquery&#x0D;<br />$(html).find(&apos;p&apos;).each(function(index){&#x0D;<br />  var content = $(this).html();&#x0D;<br />&#x0D;<br />  console.log(&apos;Paragraph&apos; + (index + 1) + &quot;: &quot; + content);  &#x0D;<br />&#x0D;<br />});&#x0D;<br />   &#x0D;<br />=====================================================================================================================&#x0D;<br />lint checkers - detect potential problems with code before we run it&#x0D;<br />&#x0D;<br />jshint&#x0D;<br />&#x0D;<br />sudo npm install -g jshint&#x0D;<br />&#x0D;<br />jshint [filename.js]&#x0D;<br />&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />=====================================================================================================================&#x0D;<br />creating web server&#x0D;<br />&#x0D;<br />*node is designed with web servers in mind&#x0D;<br />*capable of responding to basic http requests with relatively small amount of code&#x0D;<br />&#x0D;<br />server.js&#x0D;<br />var http = require(&apos;http&apos;);             //core module distributed with node&#x0D;<br />&#x0D;<br />//function is run whenever a request is sent to the server&#x0D;<br />//request object has all data that came in with http request&#x0D;<br />//response object allows us to customize what we send back to web browser&#x0D;<br />&#x0D;<br />http.createServer(function(request, response){          &#x0D;<br />  response.writeHead(200, {&apos;Content-Type&apos;: &apos;text/html&apos;});                                 //when we get a request we send back a 200 response code&#x0D;<br />  response.end(&apos;&lt;html&gt;&lt;body&gt;home, URL was: &apos; + request.url + &quot;&lt;/body&gt;&lt;/html&gt;&quot;);&#x0D;<br />  console.log(request.url);&#x0D;<br />}).listen(3000, &apos;localhost&apos;);                                                             //http to listen to port 3000 on localhost&#x0D;<br />&#x0D;<br />console.log(&apos;server running at <a href="http://localhost:3000/&apos;);&#x0D;[br">http://localhost:3000/&apos;);&#x0D;[br</a> /]&#x0D;<br />node server.js          &#x0D;<br />node-dev server.js          //when changes are made to server.js, changes update&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />Connect module&#x0D;<br />&#x0D;<br />taking care of routine tasks, builds on core http module and provides functions for common webserver configurations&#x0D;<br />&#x0D;<br />&quot;dependencies&quot;:{&#x0D;<br />  &quot;connect&apos;:&quot;1.9.2&quot;&#x0D;<br />}&#x0D;<br />&#x0D;<br />script.js&#x0D;<br />var connect = require(&apos;connect&apos;);&#x0D;<br />&#x0D;<br />var app = connect()                     &#x0D;<br />  .use(connect.static(&apos;public&apos;))            //serve files directly from public folder - serves index.html if it exists&#x0D;<br />  .use(function(req, res){&#x0D;<br />    res.end(&apos;couldnt find it&apos;);&#x0D;<br />  })&#x0D;<br />.listen(3000);&#x0D;<br />&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />node-dev script.js&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />connect - reading data&#x0D;<br />&#x0D;<br />connect is middleware handling http requests&#x0D;<br />&#x0D;<br />Connect makes it possible for you to handle multiple kinds of request by chaining calls to connect to use.&#x0D;<br />when you want to read the data being passed into the HTTP request, use the bodyParser function to have Connect prepare the data for you.&#x0D;<br />&#x0D;<br />bodyParser()              //allow us to read variables in submitted form&#x0D;<br />&#x0D;<br />var connect = require(&apos;connect&apos;);&#x0D;<br />&#x0D;<br />var app = connect()               //creating connect server&#x0D;<br />.use(connect.bodyParser())        //allow us to read variables in submitted form&#x0D;<br />.use(connect.static(&apos;public&apos;))    //connecting to public folder&#x0D;<br />.use(function(req, res){&#x0D;<br />  if(req.url === &apos;/process&apos;){&#x0D;<br />    res.end(req.body.name + &apos;would repeat&apos; + req.body.repeat + &apos; times.&apos;);&#x0D;<br />  }else{&#x0D;<br />    req.end(&apos;invalid request&apos;);&#x0D;<br />  }&#x0D;<br />})&#x0D;<br />.listen(3000);&#x0D;<br />&#x0D;<br />index.html&#x0D;<br />&lt;html&gt;&#x0D;<br />&lt;body&gt; &#x0D;<br />  &lt;form action=&quot;/process&quot; method=&quot;post&quot;&gt;            //posting to process url&#x0D;<br />    &#x0D;<br />    &lt;label for=&quot;name&quot;&gt;Name&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; value=&quot;&quot; id=&quot;name&quot;&gt;&#x0D;<br />    &lt;label for=&quot;repeat&quot;&gt;Repeat&lt;/label&gt;&lt;input type=&quot;text&quot; name=&quot;repeat&quot; value=&quot;&quot; id=&quot;repeat&quot;&gt;&#x0D;<br />&#x0D;<br />    &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/p&gt;&#x0D;<br />&#x0D;<br />  &lt;/form&gt;&#x0D;<br />&lt;/body&gt;&#x0D;<br />&lt;/html&gt; &#x0D;<br />  &#x0D;<br />&#x0D;<br />cmd: &#x0D;<br />&#x0D;<br />node-dev script.js&#x0D;<br /> &#x0D;<br />localhost:3000&#x0D;<br />&#x0D;<br />we assume we have access to the variables posted to &apos;process&apos;. if we access &apos;process&apos; directly we get undefined&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />connect usually send back appropriate header back for you.&#x0D;<br />connect allows you to override specific parts of the http response to suite your needs.&#x0D;<br />&#x0D;<br />package.json&#x0D;<br />&quot;dependencies&quot;:{&#x0D;<br />  &quot;connect&quot;:&quot;1.9.2&quot;&#x0D;<br />}&#x0D;<br />&#x0D;<br />server.js&#x0D;<br />  var connect = require(&apos;connect&apos;);&#x0D;<br />&#x0D;<br />  var app = connect()&#x0D;<br />  .use(function(req, res){&#x0D;<br />    res.statusCode = 403;&#x0D;<br />    res.end(&apos;forbidden&apos;);               //on every request we send back the message &apos;forbidden&apos;&#x0D;<br />  })&#x0D;<br />  .listen(3000);&#x0D;<br />&#x0D;<br />cmd:&#x0D;<br />  node-dev server.js&#x0D;<br />&#x0D;<br />&#x0D;<br />browser -&gt; tools -&gt; web developer -&gt; web console&#x0D;<br />&#x0D;<br />=====================================================================================================================&#x0D;<br />&#x0D;<br />var connect = require(&apos;connect&apos;);&#x0D;<br />var my_data = {&#x0D;<br />  &apos;fruit&apos;:&apos;apple&apos;&#x0D;<br />}&#x0D;<br />&#x0D;<br /></span></div></body>